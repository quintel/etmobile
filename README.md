<h1 align="center">ETMobile</h1>
<p align="center">A simple mobile interface for the Energy Transition Model.</p>

<p align="center">
  <a href="https://travis-ci.org/quintel/etmobile"><img alt="Master branch build status" src="https://img.shields.io/travis/quintel/etmobile/master.svg" /></a>

  <a href="https://codecov.io/gh/quintel/etmobile"><img alt="Code coverage status" src="https://img.shields.io/codecov/c/github/quintel/etmobile/master.svg" /></a>
</p>

## Quick start guide

1. The development version of ETMobile requires that you have Node.js installed.
   macOS users with [Homebrew][homebrew] can install Node.js easily:

   ```sh
   brew update
   brew install node
   ```

   If you already have Node.js installed, please check the version by running
   `node -v`; version 6 or newer is required. Older versions may be updated by
   running:

   ```sh
   brew update
   brew upgrade node
   ```

2. Install [Yarn][yarn]:

   ```sh
   npm install yarn -g
   ```

3. Finally, using Yarn, install the ETMobile dependencies:

   ```sh
   yarn
   ```

   You may re-run this command in the future to install any new or updated
   dependencies (which will show up as "Module not found: ...") error messages
   in the application.

You may now run the development version of ETMobile with `npm start`. The tests
can be performed with `npm test` and `npm run coverage`.

Developers may refer to the [Create React App documentation][cra].

## Adding, updating, and removing questions

Questions are randomly generated from a list of possible choices. These choices
can be found in **src/data/choices.js**.

ETMobile pre-calculates the outcome to each choice, storing the results in
**src/data/answers.js**. This file is not meant to be directly edited, but is
generated by running `npm run build-answers`.

The following actions require that `answers.js` be rebuilt:

* Adding or removing a choice
* Changing the order of choices in src/data/choices.js
* Changing the `inputs`, or `inputs` values for a choice

### Adding a choice

Visitors are shown choices in a random order, so additions should be inserted at
the bottom of the file. A choice is defined like so:

```js
{
  name: 'Choice name; appears on the button',
  header: 'Text used in the page header; "name" is used if this is not defined',
  icon: 'imageName',
  description: `
    A description of the question; this text is shown under the icons on the
    question page, immediately preceding the two choice buttons.
  `,
  inputs: {
    input_key_one: 2.0,
    input_key_two: 4.0
  }
}
```

Once you have added your choice, run `npm run build-answers` to compute the
answers for each choice.

#### Choice `name`, `header`, and `description`

`name` and `description` are texts shown to the visitor on the question page.

The `name` is displayed on the button which may be pressed by the visitor, and
in the page header. You may set custom text for the page header by supplying
an optional `header` value (this is advisable if the `name` is quite long).

`description` should provide the visitor with some information about the choice.

#### Choice `icon`

Each choice has an `icon` field defining which image will be used to represent
the choice. These images can be found in **src/images/choices**. The value of
the `icon` field should match the name of one of these images, *without* the
".svg" extension and changing under_score_names to camelCaseNames.

For example, if you wish to show "electric_vehicle.svg", the `icon` value should
be "electricVehicle".

If you add a new icon, be sure to add its name to
**src/images/choices/index.js**.

#### Choice `inputs`

A map of ETSource input keys and values which are applied to the scenario when
the visitor makes their choice.

[homebrew]: http://brew.sh
[yarn]: https://yarnpkg.com
[cra]: https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md
